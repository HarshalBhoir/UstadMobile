apply plugin: 'java'

repositories {
    mavenCentral()
    maven {
        url "http://devserver2.ustadmobile.com/repo-mvn"
    }
}

apply from: "testsettings.gradle"
sourceCompatibility = 1.7



task initAppConfig(type: Copy) {
    def buildConfigFile = new File("src/main/java/com/ustadmobile/core/impl/AppConfig.java")
    if(!buildConfigFile.exists()) {
        from "AppConfig.java.default"
        into "src/main/java/com/ustadmobile/core/impl/"
        rename { String fileName ->
            fileName.replace("AppConfig.java.default", "AppConfig.java")
        }
    }

}

logger.info("Setting dependsOn")
//compileJava.dependsOn checkBuildConfig



dependencies {
    compile "org.json:json:20160212";
    compile "net.sf.kxml:kxml2:2.3.0";
    compile files('lib/qrcode.jar');
    compile "com.ustadmobile.nanolrs:nanolrs-core:0.1.29"
    testCompile group: 'junit', name: 'junit', version: '4.+'
}

test {
    systemProperty "ustadmobile.testserver", project.ext.testServer
    systemProperty "ustadmobile.testport", project.ext.testServerPort
    systemProperty "ustadmobile.testuser", project.ext.testUser
    systemProperty "ustadmobile.testauth", project.ext.testUserAuth
}
