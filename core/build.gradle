/**
 * Core module build script : see buildconfig.core.default.gradle for configuration
 */

buildscript {
    repositories {
        maven {
            url 'https://plugins.gradle.org/m2/'
        }
    }
    dependencies {
        classpath 'gradle.plugin.de.fuerstenau:BuildConfigPlugin:1.1.7'
    }
}

plugins {
    id "java"
}

repositories {
    mavenCentral()
    maven {
        url "http://devserver2.ustadmobile.com/repo-mvn"
    }
}

dependencies {
    compile "org.json:json:20160212";
    compile "net.sf.kxml:kxml2:2.3.0";
    compile 'com.ustadmobile.qrcodelibomrfork:qrcode-core:1.0-SNAPSHOT'
    compile 'com.ustadmobile.nanolrs:nanolrs-core:0.1.37'
    testCompile group: 'junit', name: 'junit', version: '4.+'
}

ext.buildConfigProperties = new Properties()
def propertiesInFile = rootProject.file("buildconfig.core.properties").exists() ?
        rootProject.file("buildconfig.core.properties") : ("buildconfig.core.default.properties")
buildConfigProperties.load(new FileInputStream(propertiesInFile))

apply from: rootProject.file("buildconfig.core.gradle").exists() ?
        rootProject.file("buildconfig.core.gradle") : rootProject.file("buildconfig.core.default.gradle")

compileJava.dependsOn(generateCoreBuildConfig)
/*
test {
    systemProperty "ustadmobile.testserver", project.ext.testServer
    systemProperty "ustadmobile.testport", project.ext.testServerPort
    systemProperty "ustadmobile.testuser", project.ext.testUser
    systemProperty "ustadmobile.testauth", project.ext.testUserAuth
}
*/

sourceCompatibility = "1.7"
targetCompatibility = "1.7"
