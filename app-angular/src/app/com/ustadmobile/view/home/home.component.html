<header>
  <div class="navbar-fixed">
    <mz-navbar navbarClass="top-nav-height  z-depth-2 {{env.colorPrimary}}">
      <p class="brand-logo {{class_toolbar_title}}">
        <span (click)="goBack()" class="open-content"><i
            class="material-icons {{class_icon_toolbar}}">{{class_toolbar_arrow}}</i></span>
        <span class="truncate">{{toolBarTitle}}</span></p>
      <p class="show-on-small  open-content drawer-menu {{class_drawer_menu}}">
        <a mz-button [flat]=true class="top-menu" id="um-drawer" (click)="dropdown.open()">
          <i class="material-icons white-text">menu</i>
        </a>
      </p>

    </mz-navbar>
  </div>


  <!-- side nav starts here-->

  <mz-dropdown #dropdown [id]="'dropdown-menu'" [align]="'left'" [belowOrigin]="true" [constrainWidth]="false"
    [dropdownButtonId]="'um-drawer'" [gutter]="true" [hover]="true" [inDuration]="300" [outDuration]="300"
    [stopPropagation]="true">

    <li *ngFor="let navOption of navMenuOptions" (click)="dropdown.close()"><a (click)="handleSideMenuSelected($event,navMenuOptions.indexOf(navOption), -1)"><span>{{navOption.label}}</span></a>
      <mz-collection *ngIf="navOption.subMenu.length > 0">
        <mz-collection-item (click)="dropdown.close()" 
        *ngFor="let sub of navOption.subMenu" (click)="handleSideMenuSelected($event,navMenuOptions.indexOf(navOption), navOption.subMenu.indexOf(sub))">{{sub.label}}</mz-collection-item>
      </mz-collection>
    </li>
    <li > <a (click)="handleClickPersonIcon()"> <span i18n="@@profile">Profile</span></a></li>
    <li > <a (click)="bottomSheetModal.openModal()"> <span i18n="@@language">Language</span></a></li>
  </mz-dropdown> 


  <mz-modal #bottomSheetModal [fixedFooter]="false" [bottomSheet]="false" [options]="modalOptions">
    <mz-modal-content class="black">
      <div class="collection margin-modal">
        <a (click)="handleLanguageSelected(language, bottomSheetModal)" class="collection-item" *ngFor="let language of supportedLanguages">{{language}}</a>
      </div>
    </mz-modal-content>
  </mz-modal>


  <mz-sidenav #sidenav [fixed]=true [edge]="'left'" class="show-on-medium-and-up">

    <mz-sidenav-header>
      <div class="user-view" style="background: url('assets/images/top_header_bg.jpg')">
        <i class="material-icons white-text {{class_open_profile}} open-profile" (click)="handleClickPersonIcon()">open_in_new</i>
        <img class="circle avatar" [src]="userProfile">
        <div class="white-text name">{{person.firstNames + ' '+ person.lastName}}</div>
        <div class="white-text email">{{person.emailAddr}}</div>
      </div>
    </mz-sidenav-header>

    <mz-sidenav-collapsible *ngFor="let navOption of navMenuOptions" (click)="handleSideMenuSelected($event,navMenuOptions.indexOf(navOption), -1)"  id="menu_{{navMenuOptions.indexOf(navOption)}}">
      <mz-sidenav-collapsible-header>
        <span><i class="material-icons {{class_icon_position}}">{{navOption.icon}}</i>{{navOption.label}}</span>
      </mz-sidenav-collapsible-header>
      <mz-sidenav-collapsible-content *ngFor="let sub of navOption.subMenu">
        <mz-sidenav-link [active]="activeState[navOption.subMenu.indexOf(sub)]" (click)="handleSideMenuSelected($event,navMenuOptions.indexOf(navOption), navOption.subMenu.indexOf(sub))"> 
          <a class="waves-effect">{{sub.label}}</a>
        </mz-sidenav-link>
      </mz-sidenav-collapsible-content>
    </mz-sidenav-collapsible>

    <mz-sidenav-subheader></mz-sidenav-subheader>
    <mz-sidenav-divider></mz-sidenav-divider>

    <mz-sidenav-link>
        <div class="row">
          <form *ngIf="supportedLanguages" class="col s12">
              <div class="row default-content-padding-left ">
                  <label class="language {{env.colorPrimaryText}}" i18n="@@language">Languages</label>
                  <mz-select-container [inline]=true *ngIf="supportedLanguages">
                    <select mz-select [formControl]="umFormLanguage.controls['language']" id="options-language">
                      <option *ngFor="let language of supportedLanguages" value="{{language}}">{{language}}</option>
                    </select>
                  </mz-select-container>
                </div>
          </form>
        </div>
      </mz-sidenav-link>

  </mz-sidenav>

  <!-- side nav ends here-->

</header>

<!-- Content section starts here-->
<main>
  <div class="content-app-wrapper">
    <router-outlet></router-outlet>
  </div>
</main>
<!-- Content section ends here-->
