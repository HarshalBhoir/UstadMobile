IOS Port README

Setup:

1. Make a symlink for $HOME/local/j2objc to point to your j2objc directory 
  (Sorry - XCode does not like using environment variables)

2. Run the J2ObjC translation script:

 $ ./xlate.sh

3. Initiate cocoapods libraries  

 $ sudo gem install cocoapods #if you don't already have cocoapods installed
 $ pod install

4. Open the XCode workspace UstadMobileIOS.xcworkspace (NOT the xcode project as per cocoapod usage guidelines)

5. Add a breakpoint in xcode to avoid stopping in SIGUSR2 sent by the internal 
 HTTP server.
 
 Go to breakpoints (click symbol on left panel), Click Debug, Breakpoints,
 Create Symbolic breakpoint.  In Symbol Enter UIApplicationMain, leave module
 and condition blank.  Under action select "Debugger Command", enter
 "process handle SIGUSR2 -n true -p true -s false" and check Automatically 
 continue after evaluating actions.

 See http://stackoverflow.com/questions/10431579/permanently-configuring-lldb-in-xcode-4-3-2-not-to-stop-on-signals/10456557#10456557

Project Info:

The project is based on using j2objc ( http://j2objc.org ) to translate core
logic from Java into Objective C.  

Running ./xlate.sh runs j2objc and puts the generated sources in 
ports/ios/UstadMobileIOS/Generated .  This directory is added as
a User Header Search Path in XCode as per:

http://j2objc.org/docs/Xcode-Build-Rules.html ).  

Instead of using DERIVED_FILES we add the directory by right clicking
Selecting Generated, Add Files on the project ; uncheck Copy Items, 
and Select Create Groups for any Added Folders.

XCode Project Settings:

In the project in Build Settings "Other Linker Flags" -ObjC must be 
added (otherwise XMLPullParsing Factory at least won't work).

In Build Phases under Link Binary With Libraries add libz.tbd and
Security.framework (supports Zip and SSL respectively).


Memory Management:

As per http://j2objc.org/docs/Memory-Management.html recommendations
we use J2OBCJ's built in memory management for transpiled classes
and use ARC for hand written Objective C.  ARC must be disabled for
the project by default and then the -fobjc-arc compiler flag is used
for each hand written file (set in project settings, build phases,
compile sources)


